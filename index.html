<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>我的二手清单 | Second‑hand Listings</title>
  <meta name="description" content="简洁的二手物品展示页，支持搜索、筛选、排序与售出标记。" />
  <style>
    :root {
      --bg: #0b0c10;
      --card: #111218;
      --muted: #8b90a6;
      --fg: #eaeaf2;
      --brand: #7c9cff; /* 主色，可按需修改 */
      --ok: #25c08a;
      --warn: #ffb020;
      --danger: #ff4d6d;
      --chip: #1b1d26;
      --border: #1a1c24;
    }
    html, body { height: 100%; }
    body {
      margin: 0; background: linear-gradient(180deg, #0b0c10, #0d0f17 40%, #0b0c10 100%);
      color: var(--fg); font: 15px/1.6 system-ui, -apple-system, Segoe UI, Roboto, "PingFang SC", "Noto Sans CJK SC", Helvetica, Arial, sans-serif;
    }
    .container { max-width: 1100px; margin: 0 auto; padding: 24px 16px 80px; }
    header { display: grid; gap: 10px; margin-bottom: 18px; }
    .title {
      display: flex; align-items: baseline; gap: 12px; flex-wrap: wrap;
    }
    .title h1 { margin: 0; font-size: 26px; letter-spacing: .2px; }
    .subtitle { color: var(--muted); font-size: 13px; }

    .toolbar {
      display: grid; grid-template-columns: 1fr; gap: 10px; margin-top: 6px;
    }
    .row { display: grid; grid-template-columns: 1fr; gap: 8px; }
    @media (min-width: 720px) {
      .row { grid-template-columns: 1.2fr .9fr .9fr .6fr; }
    }
    .input, select {
      width: 100%; background: var(--card); color: var(--fg); border: 1px solid var(--border);
      border-radius: 12px; padding: 10px 12px; outline: none;
    }
    .input::placeholder { color: #9aa2b2; }

    .chips { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 8px; }
    .chip { background: var(--chip); color: var(--muted); border: 1px solid var(--border); border-radius: 999px; padding: 6px 10px; font-size: 12px; }

    .grid { display: grid; gap: 14px; grid-template-columns: repeat(1, minmax(0,1fr)); margin-top: 14px; }
    @media (min-width: 540px) { .grid { grid-template-columns: repeat(2, minmax(0,1fr)); } }
    @media (min-width: 980px) { .grid { grid-template-columns: repeat(3, minmax(0,1fr)); } }

    .card {
      position: relative; background: linear-gradient(180deg, #12131a, #0f1016); border: 1px solid var(--border); border-radius: 16px; overflow: hidden;
      box-shadow: 0 10px 24px rgba(0,0,0,.35);
    }
    .thumb {
      aspect-ratio: 4 / 3; width: 100%; object-fit: cover; display: block; background: #0a0b10;
    }
    .badge {
      position: absolute; top: 10px; right: 10px; background: rgba(10,11,20,.6); backdrop-filter: blur(8px);
      border: 1px solid var(--border); color: #fff; padding: 6px 10px; border-radius: 12px; font-weight: 600; font-size: 13px;
    }
    .status {
      position: absolute; inset: 0; display: none; place-items: center; text-transform: uppercase; letter-spacing: 3px;
      background: rgba(0,0,0,.55); color: #fff; font-weight: 800; font-size: 18px;
    }
    .card.sold .thumb { filter: grayscale(1) contrast(.8) brightness(.8); }
    .card.sold .status { display: grid; }
    .card.reserved .badge { background: rgba(255,176,32,.16); border-color: #664b11; }

    .content { padding: 12px 14px 14px; display: grid; gap: 8px; }
    .titleRow { display: flex; justify-content: space-between; gap: 8px; }
    .itemTitle { margin: 0; font-size: 16px; font-weight: 700; }
    .muted { color: var(--muted); font-size: 12px; }
    .desc { color: #c9cfe4; font-size: 13px; min-height: 2.1em; }
    .meta { display: flex; gap: 8px; flex-wrap: wrap; }
    .meta .tag { background: var(--chip); border: 1px solid var(--border); color: #b9bfd7; border-radius: 8px; padding: 4px 8px; font-size: 12px; }

    .actions { display: flex; gap: 8px; }
    .btn { flex: 1; text-align: center; padding: 9px 10px; border-radius: 10px; border: 1px solid var(--border); background: #151723; color: #e6e9f6; cursor: pointer; font-weight: 600; }
    .btn:hover { filter: brightness(1.05); }
    .btn.primary { background: linear-gradient(180deg, #2f3cff, #6f86ff); border: none; }

    footer { margin-top: 20px; color: var(--muted); font-size: 12px; display: flex; justify-content: space-between; gap: 8px; flex-wrap: wrap; }
    .count { color: #a6add0; }

    /* 浮动说明 */
    details.guide { background: #0e1020; border: 1px dashed #2a2f44; border-radius: 12px; padding: 10px 12px; margin: 14px 0; }
    details.guide summary { cursor: pointer; color: #cdd3ef; font-weight: 600; }
    details.guide pre { white-space: pre-wrap; color: #c5cbea; background: #0b0d19; border: 1px solid #1b1f33; padding: 10px 12px; border-radius: 10px; overflow: auto; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="title">
        <h1>二手物品清单</h1>
        <span class="subtitle">Simple second‑hand listings · 可本地打开或直接托管到 GitHub Pages/Netlify</span>
      </div>

      <details class="guide">
        <summary>📌 使用说明（点我展开）</summary>
        <div style="margin-top:8px">
          <ol>
            <li>把本文件与图片放在同一文件夹，或使用图片的在线链接（iCloud/Google Drive 共享链接需要“任何人可查看”）。</li>
            <li>按下方 <b>items</b> 数组的注释格式，替换示例数据即可上架你的物品；每个条目至少需要 <code>title, price, img</code>。</li>
            <li>支持：搜索、分类筛选、价格/时间排序、售出/预定状态标记、复制卡片链接。</li>
            <li>如需改币种，修改顶部 <code>defaultCurrency</code>，或给单个条目写 <code>currency</code> 覆盖。</li>
            <li>如需展示联系信息（微信/WhatsApp），修改 <code>seller.contact</code>。</li>
          </ol>
          <pre><code>// 需要替换的数据在最底部 window.APP_DATA = { items: [...] }
// 字段建议：
// {
//   id: "SKU-001",              // 可选，自动生成
//   title: "小米电饭煲 3L",
//   desc: "用两年，功能正常，附送量杯与勺子。",
//   price: 25,                   // 数字
//   currency: "EUR",            // 可选，默认同全局
//   category: "家电",
//   condition: "九成新",         // 全新/九成新/良好/一般
//   location: "Milano Città Studi",
//   img: "ricecooker.jpg",      // 推荐 4:3，支持在线URL
//   date: "2025-08-26",         // YYYY-MM-DD，排序用
//   status: "available",        // available / reserved / sold
// }
</code></pre>
        </div>
      </details>

      <div class="toolbar">
        <div class="row">
          <input class="input" id="q" placeholder="🔎 搜索标题/描述/分类… Search" />
          <select id="cat">
            <option value="">全部分类 · All</option>
          </select>
          <select id="sort">
            <option value="date_desc">最新优先</option>
            <option value="price_asc">价格从低到高</option>
            <option value="price_desc">价格从高到低</option>
            <option value="title_asc">标题 A→Z</option>
          </select>
          <select id="status">
            <option value="">状态：全部</option>
            <option value="available">在售</option>
            <option value="reserved">预定</option>
            <option value="sold">已售</option>
          </select>
        </div>
        <div class="chips" id="chips"></div>
      </div>
    </header>

    <section class="grid" id="grid"></section>

    <footer>
      <div class="count" id="count">0 items</div>
      <div id="contact"></div>
    </footer>
  </div>

  <script>
    // ======= 可自定义：全局卖家信息与默认货币 =======
    const seller = {
      name: "卖家 Seller",
      contact: "联系我：WeChat: your_wechat · Email: you@example.com",
      defaultCurrency: "EUR"
    };

    // ======= 辅助函数 =======
    const $ = (sel, el=document) => el.querySelector(sel);
    const $$ = (sel, el=document) => Array.from(el.querySelectorAll(sel));
    const fmt = (n, c) => new Intl.NumberFormat(undefined, { style: 'currency', currency: c || seller.defaultCurrency, maximumFractionDigits: 0 }).format(n);
    const byId = id => document.getElementById(id);

    function unique(arr) { return Array.from(new Set(arr)); }

    function sortItems(items, mode) {
      const arr = [...items];
      switch (mode) {
        case 'price_asc':  return arr.sort((a,b)=> (a.price??0)-(b.price??0));
        case 'price_desc': return arr.sort((a,b)=> (b.price??0)-(a.price??0));
        case 'title_asc':  return arr.sort((a,b)=> String(a.title).localeCompare(String(b.title)));
        case 'date_desc':
        default:
          return arr.sort((a,b)=> new Date(b.date||0)-new Date(a.date||0));
      }
    }

    function createCard(item) {
      const currency = item.currency || seller.defaultCurrency;
      const el = document.createElement('article');
      el.className = `card ${item.status==='sold'?'sold':''} ${item.status==='reserved'?'reserved':''}`;
      el.id = item.id || `item-${Math.random().toString(36).slice(2,8)}`;
      el.innerHTML = `
        <div class="media">
          <img class="thumb" src="${item.img}" alt="${item.title}" loading="lazy"/>
          <div class="badge">${fmt(item.price, currency)}</div>
          <div class="status">${item.status==='sold'?'SOLD 已售': item.status==='reserved'?'RESERVED 预定':''}</div>
        </div>
        <div class="content">
          <div class="titleRow">
            <h3 class="itemTitle">${item.title}</h3>
          </div>
          <div class="desc">${item.desc || ''}</div>
          <div class="meta">
            ${item.category? `<span class="tag">分类 ${item.category}</span>`:''}
            ${item.condition? `<span class="tag">成色 ${item.condition}</span>`:''}
            ${item.location? `<span class="tag">地点 ${item.location}</span>`:''}
            ${item.date? `<span class="tag">上架 ${item.date}</span>`:''}
          </div>
          <div class="actions">
            <button class="btn" data-copy="#${el.id}">复制链接</button>
            ${item.status!=='sold' ? `<a class="btn primary" href="mailto:?subject=${encodeURIComponent('想咨询：'+item.title)}&body=${encodeURIComponent(location.href.split('#')[0]+'#'+el.id)}">我想要</a>` : `<button class="btn" disabled>已售出</button>`}
          </div>
        </div>
      `;
      el.querySelector('[data-copy]')?.addEventListener('click', (e)=>{
        const hash = e.currentTarget.getAttribute('data-copy');
        const url = location.href.split('#')[0] + hash;
        navigator.clipboard?.writeText(url).then(()=>{
          e.currentTarget.textContent = '已复制';
          setTimeout(()=> e.currentTarget.textContent = '复制链接', 1400);
        });
      });
      return el;
    }

    function render(data){
      const grid = byId('grid');
      grid.innerHTML = '';

      // 读筛选
      const q = byId('q').value.trim().toLowerCase();
      const cat = byId('cat').value;
      const status = byId('status').value;
      const sort = byId('sort').value;

      let items = data.items.filter(x=> !!x && x.title);
      if(q){
        items = items.filter(x=> [x.title, x.desc, x.category].filter(Boolean).join(' ').toLowerCase().includes(q));
      }
      if(cat){ items = items.filter(x=> x.category === cat); }
      if(status){ items = items.filter(x=> (x.status||'available') === status); }

      items = sortItems(items, sort);

      // 渲染卡片
      items.forEach(it=> grid.appendChild(createCard(it)));

      // 统计
      byId('count').textContent = `${items.length} 件在当前筛选中 · ${data.items.length} 件总计`;

      // 分类 chips（可点击快速筛选）
      const cats = unique(data.items.map(x=>x.category).filter(Boolean));
      const chips = byId('chips');
      chips.innerHTML = cats.map(c=>`<button class="chip" data-c="${c}">${c}</button>`).join('');
      chips.querySelectorAll('button').forEach(btn=> btn.addEventListener('click', ()=>{ byId('cat').value = btn.dataset.c; render(data); }));

      // 联系方式
      byId('contact').textContent = seller.contact || '';
    }

    function setup(data){
      // 分类下拉
      const cats = unique(data.items.map(x=>x.category).filter(Boolean));
      const catSel = byId('cat');
      cats.forEach(c=>{ const o=document.createElement('option'); o.value=c; o.textContent=c; catSel.appendChild(o); });

      ['q','cat','sort','status'].forEach(id=> byId(id).addEventListener('input', ()=> render(data)));

      render(data);

      // 定位锚点（分享卡片直达）
      if(location.hash){
        const anchor = document.querySelector(location.hash);
        anchor?.scrollIntoView({behavior:'smooth', block:'center'});
      }
    }
  </script>

  <!-- ======= 你只需要修改下面这个数据对象即可上架物品 ======= -->
  <script>
    window.APP_DATA = {
      items: [
        {
          id: "SKU-001",
          title: "iPad Pro 11'' (2020) + Apple Pencil",
          desc: "128GB，轻度使用，无明显划痕，附原装充电器与保护壳。",
          price: 430,
          currency: "EUR",
          category: "电子产品",
          condition: "九成新",
          location: "Milano - Città Studi",
          img: "https://images.unsplash.com/photo-1510552776732-01acc9a4c1f6?q=80&w=1200&auto=format&fit=crop",
          date: "2025-08-24",
          status: "available"
        },
        {
          id: "SKU-002",
          title: "飞利浦空气炸锅 4.1L",
          desc: "适合 1-3 人，干净好用，赠烘焙纸。",
          price: 35,
          category: "家电",
          condition: "良好",
          location: "Milano - Lambrate",
          img: "https://images.unsplash.com/photo-1556912998-c57cc6b63cd7?q=80&w=1200&auto=format&fit=crop",
          date: "2025-08-20",
          status: "reserved"
        },
        {
          id: "SKU-003",
          title: "全身落地镜 150×40cm",
          desc: "带支架，可靠墙，搬家出。",
          price: 15,
          category: "家具",
          condition: "一般",
          location: "Milano - Porta Romana",
          img: "https://images.unsplash.com/photo-1470274038469-958113db2384?q=80&w=1200&auto=format&fit=crop",
          date: "2025-08-18",
          status: "sold"
        }
      ]
    };

    // 初始化渲染
    setup(window.APP_DATA);
  </script>
</body>
</html>
