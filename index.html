<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>æˆ‘çš„äºŒæ‰‹æ¸…å• | Secondâ€‘hand Listings</title>
  <meta name="description" content="ç®€æ´çš„äºŒæ‰‹ç‰©å“å±•ç¤ºé¡µï¼Œæ”¯æŒæœç´¢ã€ç­›é€‰ã€æ’åºä¸å”®å‡ºæ ‡è®°ã€‚" />
  <style>
    :root {
      --bg: #0b0c10;
      --card: #111218;
      --muted: #8b90a6;
      --fg: #eaeaf2;
      --brand: #7c9cff; /* ä¸»è‰²ï¼Œå¯æŒ‰éœ€ä¿®æ”¹ */
      --ok: #25c08a;
      --warn: #ffb020;
      --danger: #ff4d6d;
      --chip: #1b1d26;
      --border: #1a1c24;
    }
    html, body { height: 100%; }
    body {
      margin: 0; background: linear-gradient(180deg, #0b0c10, #0d0f17 40%, #0b0c10 100%);
      color: var(--fg); font: 15px/1.6 system-ui, -apple-system, Segoe UI, Roboto, "PingFang SC", "Noto Sans CJK SC", Helvetica, Arial, sans-serif;
    }
    .container { max-width: 1100px; margin: 0 auto; padding: 24px 16px 80px; }
    header { display: grid; gap: 10px; margin-bottom: 18px; }
    .title {
      display: flex; align-items: baseline; gap: 12px; flex-wrap: wrap;
    }
    .title h1 { margin: 0; font-size: 26px; letter-spacing: .2px; }
    .subtitle { color: var(--muted); font-size: 13px; }

    .toolbar {
      display: grid; grid-template-columns: 1fr; gap: 10px; margin-top: 6px;
    }
    .row { display: grid; grid-template-columns: 1fr; gap: 8px; }
    @media (min-width: 720px) {
      .row { grid-template-columns: 1.2fr .9fr .9fr .6fr; }
    }
    .input, select {
      width: 100%; background: var(--card); color: var(--fg); border: 1px solid var(--border);
      border-radius: 12px; padding: 10px 12px; outline: none;
    }
    .input::placeholder { color: #9aa2b2; }

    .chips { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 8px; }
    .chip { background: var(--chip); color: var(--muted); border: 1px solid var(--border); border-radius: 999px; padding: 6px 10px; font-size: 12px; }

    .grid { display: grid; gap: 14px; grid-template-columns: repeat(1, minmax(0,1fr)); margin-top: 14px; }
    @media (min-width: 540px) { .grid { grid-template-columns: repeat(2, minmax(0,1fr)); } }
    @media (min-width: 980px) { .grid { grid-template-columns: repeat(3, minmax(0,1fr)); } }

    .card {
      position: relative; background: linear-gradient(180deg, #12131a, #0f1016); border: 1px solid var(--border); border-radius: 16px; overflow: hidden;
      box-shadow: 0 10px 24px rgba(0,0,0,.35);
    }
    .thumb {
      aspect-ratio: 4 / 3; width: 100%; object-fit: cover; display: block; background: #0a0b10;
    }
    .badge {
      position: absolute; top: 10px; right: 10px; background: rgba(10,11,20,.6); backdrop-filter: blur(8px);
      border: 1px solid var(--border); color: #fff; padding: 6px 10px; border-radius: 12px; font-weight: 600; font-size: 13px;
    }
    .status {
      position: absolute; inset: 0; display: none; place-items: center; text-transform: uppercase; letter-spacing: 3px;
      background: rgba(0,0,0,.55); color: #fff; font-weight: 800; font-size: 18px;
    }
    .card.sold .thumb { filter: grayscale(1) contrast(.8) brightness(.8); }
    .card.sold .status { display: grid; }
    .card.reserved .badge { background: rgba(255,176,32,.16); border-color: #664b11; }

    .content { padding: 12px 14px 14px; display: grid; gap: 8px; }
    .titleRow { display: flex; justify-content: space-between; gap: 8px; }
    .itemTitle { margin: 0; font-size: 16px; font-weight: 700; }
    .muted { color: var(--muted); font-size: 12px; }
    .desc { color: #c9cfe4; font-size: 13px; min-height: 2.1em; }
    .meta { display: flex; gap: 8px; flex-wrap: wrap; }
    .meta .tag { background: var(--chip); border: 1px solid var(--border); color: #b9bfd7; border-radius: 8px; padding: 4px 8px; font-size: 12px; }

    .actions { display: flex; gap: 8px; }
    .btn { flex: 1; text-align: center; padding: 9px 10px; border-radius: 10px; border: 1px solid var(--border); background: #151723; color: #e6e9f6; cursor: pointer; font-weight: 600; }
    .btn:hover { filter: brightness(1.05); }
    .btn.primary { background: linear-gradient(180deg, #2f3cff, #6f86ff); border: none; }

    footer { margin-top: 20px; color: var(--muted); font-size: 12px; display: flex; justify-content: space-between; gap: 8px; flex-wrap: wrap; }
    .count { color: #a6add0; }

    /* æµ®åŠ¨è¯´æ˜ */
    details.guide { background: #0e1020; border: 1px dashed #2a2f44; border-radius: 12px; padding: 10px 12px; margin: 14px 0; }
    details.guide summary { cursor: pointer; color: #cdd3ef; font-weight: 600; }
    details.guide pre { white-space: pre-wrap; color: #c5cbea; background: #0b0d19; border: 1px solid #1b1f33; padding: 10px 12px; border-radius: 10px; overflow: auto; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="title">
        <h1>äºŒæ‰‹ç‰©å“æ¸…å•</h1>
        <span class="subtitle">Simple secondâ€‘hand listings Â· å¯æœ¬åœ°æ‰“å¼€æˆ–ç›´æ¥æ‰˜ç®¡åˆ° GitHub Pages/Netlify</span>
      </div>

      <details class="guide">
        <summary>ğŸ“Œ ä½¿ç”¨è¯´æ˜ï¼ˆç‚¹æˆ‘å±•å¼€ï¼‰</summary>
        <div style="margin-top:8px">
          <ol>
            <li>æŠŠæœ¬æ–‡ä»¶ä¸å›¾ç‰‡æ”¾åœ¨åŒä¸€æ–‡ä»¶å¤¹ï¼Œæˆ–ä½¿ç”¨å›¾ç‰‡çš„åœ¨çº¿é“¾æ¥ï¼ˆiCloud/Google Drive å…±äº«é“¾æ¥éœ€è¦â€œä»»ä½•äººå¯æŸ¥çœ‹â€ï¼‰ã€‚</li>
            <li>æŒ‰ä¸‹æ–¹ <b>items</b> æ•°ç»„çš„æ³¨é‡Šæ ¼å¼ï¼Œæ›¿æ¢ç¤ºä¾‹æ•°æ®å³å¯ä¸Šæ¶ä½ çš„ç‰©å“ï¼›æ¯ä¸ªæ¡ç›®è‡³å°‘éœ€è¦ <code>title, price, img</code>ã€‚</li>
            <li>æ”¯æŒï¼šæœç´¢ã€åˆ†ç±»ç­›é€‰ã€ä»·æ ¼/æ—¶é—´æ’åºã€å”®å‡º/é¢„å®šçŠ¶æ€æ ‡è®°ã€å¤åˆ¶å¡ç‰‡é“¾æ¥ã€‚</li>
            <li>å¦‚éœ€æ”¹å¸ç§ï¼Œä¿®æ”¹é¡¶éƒ¨ <code>defaultCurrency</code>ï¼Œæˆ–ç»™å•ä¸ªæ¡ç›®å†™ <code>currency</code> è¦†ç›–ã€‚</li>
            <li>å¦‚éœ€å±•ç¤ºè”ç³»ä¿¡æ¯ï¼ˆå¾®ä¿¡/WhatsAppï¼‰ï¼Œä¿®æ”¹ <code>seller.contact</code>ã€‚</li>
          </ol>
          <pre><code>// éœ€è¦æ›¿æ¢çš„æ•°æ®åœ¨æœ€åº•éƒ¨ window.APP_DATA = { items: [...] }
// å­—æ®µå»ºè®®ï¼š
// {
//   id: "SKU-001",              // å¯é€‰ï¼Œè‡ªåŠ¨ç”Ÿæˆ
//   title: "å°ç±³ç”µé¥­ç…² 3L",
//   desc: "ç”¨ä¸¤å¹´ï¼ŒåŠŸèƒ½æ­£å¸¸ï¼Œé™„é€é‡æ¯ä¸å‹ºå­ã€‚",
//   price: 25,                   // æ•°å­—
//   currency: "EUR",            // å¯é€‰ï¼Œé»˜è®¤åŒå…¨å±€
//   category: "å®¶ç”µ",
//   condition: "ä¹æˆæ–°",         // å…¨æ–°/ä¹æˆæ–°/è‰¯å¥½/ä¸€èˆ¬
//   location: "Milano CittÃ  Studi",
//   img: "ricecooker.jpg",      // æ¨è 4:3ï¼Œæ”¯æŒåœ¨çº¿URL
//   date: "2025-08-26",         // YYYY-MM-DDï¼Œæ’åºç”¨
//   status: "available",        // available / reserved / sold
// }
</code></pre>
        </div>
      </details>

      <div class="toolbar">
        <div class="row">
          <input class="input" id="q" placeholder="ğŸ” æœç´¢æ ‡é¢˜/æè¿°/åˆ†ç±»â€¦ Search" />
          <select id="cat">
            <option value="">å…¨éƒ¨åˆ†ç±» Â· All</option>
          </select>
          <select id="sort">
            <option value="date_desc">æœ€æ–°ä¼˜å…ˆ</option>
            <option value="price_asc">ä»·æ ¼ä»ä½åˆ°é«˜</option>
            <option value="price_desc">ä»·æ ¼ä»é«˜åˆ°ä½</option>
            <option value="title_asc">æ ‡é¢˜ Aâ†’Z</option>
          </select>
          <select id="status">
            <option value="">çŠ¶æ€ï¼šå…¨éƒ¨</option>
            <option value="available">åœ¨å”®</option>
            <option value="reserved">é¢„å®š</option>
            <option value="sold">å·²å”®</option>
          </select>
        </div>
        <div class="chips" id="chips"></div>
      </div>
    </header>

    <section class="grid" id="grid"></section>

    <footer>
      <div class="count" id="count">0 items</div>
      <div id="contact"></div>
    </footer>
  </div>

  <script>
    // ======= å¯è‡ªå®šä¹‰ï¼šå…¨å±€å–å®¶ä¿¡æ¯ä¸é»˜è®¤è´§å¸ =======
    const seller = {
      name: "å–å®¶ Seller",
      contact: "è”ç³»æˆ‘ï¼šWeChat: your_wechat Â· Email: you@example.com",
      defaultCurrency: "EUR"
    };

    // ======= è¾…åŠ©å‡½æ•° =======
    const $ = (sel, el=document) => el.querySelector(sel);
    const $$ = (sel, el=document) => Array.from(el.querySelectorAll(sel));
    const fmt = (n, c) => new Intl.NumberFormat(undefined, { style: 'currency', currency: c || seller.defaultCurrency, maximumFractionDigits: 0 }).format(n);
    const byId = id => document.getElementById(id);

    function unique(arr) { return Array.from(new Set(arr)); }

    function sortItems(items, mode) {
      const arr = [...items];
      switch (mode) {
        case 'price_asc':  return arr.sort((a,b)=> (a.price??0)-(b.price??0));
        case 'price_desc': return arr.sort((a,b)=> (b.price??0)-(a.price??0));
        case 'title_asc':  return arr.sort((a,b)=> String(a.title).localeCompare(String(b.title)));
        case 'date_desc':
        default:
          return arr.sort((a,b)=> new Date(b.date||0)-new Date(a.date||0));
      }
    }

    function createCard(item) {
      const currency = item.currency || seller.defaultCurrency;
      const el = document.createElement('article');
      el.className = `card ${item.status==='sold'?'sold':''} ${item.status==='reserved'?'reserved':''}`;
      el.id = item.id || `item-${Math.random().toString(36).slice(2,8)}`;
      el.innerHTML = `
        <div class="media">
          <img class="thumb" src="${item.img}" alt="${item.title}" loading="lazy"/>
          <div class="badge">${fmt(item.price, currency)}</div>
          <div class="status">${item.status==='sold'?'SOLD å·²å”®': item.status==='reserved'?'RESERVED é¢„å®š':''}</div>
        </div>
        <div class="content">
          <div class="titleRow">
            <h3 class="itemTitle">${item.title}</h3>
          </div>
          <div class="desc">${item.desc || ''}</div>
          <div class="meta">
            ${item.category? `<span class="tag">åˆ†ç±» ${item.category}</span>`:''}
            ${item.condition? `<span class="tag">æˆè‰² ${item.condition}</span>`:''}
            ${item.location? `<span class="tag">åœ°ç‚¹ ${item.location}</span>`:''}
            ${item.date? `<span class="tag">ä¸Šæ¶ ${item.date}</span>`:''}
          </div>
          <div class="actions">
            <button class="btn" data-copy="#${el.id}">å¤åˆ¶é“¾æ¥</button>
            ${item.status!=='sold' ? `<a class="btn primary" href="mailto:?subject=${encodeURIComponent('æƒ³å’¨è¯¢ï¼š'+item.title)}&body=${encodeURIComponent(location.href.split('#')[0]+'#'+el.id)}">æˆ‘æƒ³è¦</a>` : `<button class="btn" disabled>å·²å”®å‡º</button>`}
          </div>
        </div>
      `;
      el.querySelector('[data-copy]')?.addEventListener('click', (e)=>{
        const hash = e.currentTarget.getAttribute('data-copy');
        const url = location.href.split('#')[0] + hash;
        navigator.clipboard?.writeText(url).then(()=>{
          e.currentTarget.textContent = 'å·²å¤åˆ¶';
          setTimeout(()=> e.currentTarget.textContent = 'å¤åˆ¶é“¾æ¥', 1400);
        });
      });
      return el;
    }

    function render(data){
      const grid = byId('grid');
      grid.innerHTML = '';

      // è¯»ç­›é€‰
      const q = byId('q').value.trim().toLowerCase();
      const cat = byId('cat').value;
      const status = byId('status').value;
      const sort = byId('sort').value;

      let items = data.items.filter(x=> !!x && x.title);
      if(q){
        items = items.filter(x=> [x.title, x.desc, x.category].filter(Boolean).join(' ').toLowerCase().includes(q));
      }
      if(cat){ items = items.filter(x=> x.category === cat); }
      if(status){ items = items.filter(x=> (x.status||'available') === status); }

      items = sortItems(items, sort);

      // æ¸²æŸ“å¡ç‰‡
      items.forEach(it=> grid.appendChild(createCard(it)));

      // ç»Ÿè®¡
      byId('count').textContent = `${items.length} ä»¶åœ¨å½“å‰ç­›é€‰ä¸­ Â· ${data.items.length} ä»¶æ€»è®¡`;

      // åˆ†ç±» chipsï¼ˆå¯ç‚¹å‡»å¿«é€Ÿç­›é€‰ï¼‰
      const cats = unique(data.items.map(x=>x.category).filter(Boolean));
      const chips = byId('chips');
      chips.innerHTML = cats.map(c=>`<button class="chip" data-c="${c}">${c}</button>`).join('');
      chips.querySelectorAll('button').forEach(btn=> btn.addEventListener('click', ()=>{ byId('cat').value = btn.dataset.c; render(data); }));

      // è”ç³»æ–¹å¼
      byId('contact').textContent = seller.contact || '';
    }

    function setup(data){
      // åˆ†ç±»ä¸‹æ‹‰
      const cats = unique(data.items.map(x=>x.category).filter(Boolean));
      const catSel = byId('cat');
      cats.forEach(c=>{ const o=document.createElement('option'); o.value=c; o.textContent=c; catSel.appendChild(o); });

      ['q','cat','sort','status'].forEach(id=> byId(id).addEventListener('input', ()=> render(data)));

      render(data);

      // å®šä½é”šç‚¹ï¼ˆåˆ†äº«å¡ç‰‡ç›´è¾¾ï¼‰
      if(location.hash){
        const anchor = document.querySelector(location.hash);
        anchor?.scrollIntoView({behavior:'smooth', block:'center'});
      }
    }
  </script>

  <!-- ======= ä½ åªéœ€è¦ä¿®æ”¹ä¸‹é¢è¿™ä¸ªæ•°æ®å¯¹è±¡å³å¯ä¸Šæ¶ç‰©å“ ======= -->
  <script>
    window.APP_DATA = {
      items: [
        {
          id: "SKU-001",
          title: "iPad Pro 11'' (2020) + Apple Pencil",
          desc: "128GBï¼Œè½»åº¦ä½¿ç”¨ï¼Œæ— æ˜æ˜¾åˆ’ç—•ï¼Œé™„åŸè£…å……ç”µå™¨ä¸ä¿æŠ¤å£³ã€‚",
          price: 430,
          currency: "EUR",
          category: "ç”µå­äº§å“",
          condition: "ä¹æˆæ–°",
          location: "Milano - CittÃ  Studi",
          img: "https://images.unsplash.com/photo-1510552776732-01acc9a4c1f6?q=80&w=1200&auto=format&fit=crop",
          date: "2025-08-24",
          status: "available"
        },
        {
          id: "SKU-002",
          title: "é£åˆ©æµ¦ç©ºæ°”ç‚¸é”… 4.1L",
          desc: "é€‚åˆ 1-3 äººï¼Œå¹²å‡€å¥½ç”¨ï¼Œèµ çƒ˜ç„™çº¸ã€‚",
          price: 35,
          category: "å®¶ç”µ",
          condition: "è‰¯å¥½",
          location: "Milano - Lambrate",
          img: "https://images.unsplash.com/photo-1556912998-c57cc6b63cd7?q=80&w=1200&auto=format&fit=crop",
          date: "2025-08-20",
          status: "reserved"
        },
        {
          id: "SKU-003",
          title: "å…¨èº«è½åœ°é•œ 150Ã—40cm",
          desc: "å¸¦æ”¯æ¶ï¼Œå¯é å¢™ï¼Œæ¬å®¶å‡ºã€‚",
          price: 15,
          category: "å®¶å…·",
          condition: "ä¸€èˆ¬",
          location: "Milano - Porta Romana",
          img: "https://images.unsplash.com/photo-1470274038469-958113db2384?q=80&w=1200&auto=format&fit=crop",
          date: "2025-08-18",
          status: "sold"
        }
      ]
    };

    // åˆå§‹åŒ–æ¸²æŸ“
    setup(window.APP_DATA);
  </script>
</body>
</html>
